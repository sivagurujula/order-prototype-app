(this["webpackJsonporder-fttp-app"]=this["webpackJsonporder-fttp-app"]||[]).push([[0],{100:function(e){e.exports=JSON.parse("{}")},101:function(e){e.exports=JSON.parse("{}")},103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),i=a.n(o),l=(a(92),a(93),a(55)),s=a(70),c=a(36),m=a(151),p=a(155),u=a(148),d=a(162),h=a(156),g=a(160),f=a(157),E=a(154),v=a(34),b=a(21),y=a(51),x=a(43),T=a.n(x),k=a(54);a(100),a(101);var S=a(64),w=a(65),A=a(73),O=a(71),D=a(42),F=a(45),L=a(72),N=a(141),C=a(142),P=a(143),j=a(66),B=a.n(j),W=function(e){Object(A.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).showOtherSlots=function(){n.setState({showOtherSlots:!0})},n.reserveSlot=function(e){console.log("Slot selected: ",e),n.setState({showOtherSlots:!0,defaultSlot:e.slot,selectedAppointment:e})},n.onSubmitReserve=function(){n.props.history.push("/reserve/")},n.chunk=function(e,t,a){for(var o=[],i=e.length+e.length%t+1,l=0;l<i;l++){var s=e.slice(l*t,(l+1)*t).map((function(e,t){return r.a.createElement(F.a,{variant:a===e.id?"success":"light",key:e.id,value:e.id,className:"rounded mb-0 mr-1 block-example border border-dark",onClick:function(){return n.reserveSlot(e)}},e.slot)}));o.push(r.a.createElement(L.a,{name:"pickAppointment"+l,key:l,size:"lg",className:"mb-2",type:"radio"},s,r.a.createElement("br",null)))}return o},n.formatDateTimeSlot=function(e){var t=new Date(e.startDateTime),a={timeZone:"UTC",hour12:!0,hour:"numeric"},n=t.toLocaleTimeString({},a),r=new Date(e.endDateTime).toLocaleTimeString({},a),o=t.toLocaleDateString({},{weekday:"short"}),i=t.toLocaleDateString({},{month:"short"});return o+" "+t.getDate()+" "+i+"  "+n.toLocaleLowerCase().replace(/\s/g,"")+" - "+r.toLocaleLowerCase().replace(/\s/g,"")},n.formatWeekSlot=function(e){var t=new Date(e.startDateTime),a=t.toLocaleDateString({},{weekday:"short"}),n=t.toLocaleDateString({},{month:"short"});return a+" "+t.getDate()+" "+n},n.formatTimeSlot=function(e){var t={timeZone:"UTC",hour12:!0,hour:"numeric"};return new Date(e.startDateTime).toLocaleTimeString({},t)+" - "+new Date(e.endDateTime).toLocaleTimeString({},t)},n.getList=function(e){e.sort((function(e,t){return new Date(e.startDateTime)-new Date(t.startDateTime)})),console.log("getList:: loading...",n.props.isLoading);var t=void 0===e?[]:e.map((function(e,t){return{id:t+1,slot:n.formatDateTimeSlot(e),weekMonth:n.formatWeekSlot(e),timeSlot:n.formatTimeSlot(e),validFor:e}}));console.log("appointmentsJSON: ",t);var a=t[0];return n.setState(Object(b.a)(Object(b.a)({},n.state),{},{appointmentsFromAPI:t,defaultSlot:a.slot,selectedAppointment:a})),n.props.reserveAppointment(a),t},n.state={buttonsData:null,defaultSlot:"Mon 20 Jul 8am - 1pm",selectedAppointment:null,showOtherSlots:!1,appointmentsFromAPI:null},n}return Object(w.a)(a,[{key:"getAppointments",value:function(){var e=null==this.state.selectedAppointment?null:this.state.selectedAppointment.id;null==e&&(e=1);var t=this.state.appointmentsFromAPI;return this.chunk(null===t?this.getList(this.props.appointments):t,5,e)}},{key:"componentDidMount",value:function(){this.props.fetchAppointments()}},{key:"componentWillReceiveProps",value:function(e){this.props.appointments!==e.appointments&&(console.log("nextProps",e),console.log("cuurentProps",this.props),this.getList(e.appointments))}},{key:"render",value:function(){var e=this,t=this.state,a=t.defaultSlot,n=t.showOtherSlots,o=t.selectedAppointment,i=this.props.isLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{src:B.a}),r.a.createElement("br",null),i&&r.a.createElement(r.a.Fragment,null,"Loading..."),!n&&!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null," We've reserved the first available appointment"),r.a.createElement(D.a,{variant:"success",disabled:!0,className:"rounded mb-0 mr-2 block-example border border-dark"},a),r.a.createElement(C.a,{variant:"success"},"Reserved"),r.a.createElement("br",null),r.a.createElement("br",null)),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"center"},"Select an appointment"),r.a.createElement("div",{className:"box"},r.a.createElement(P.a,{name:"pickAppointment",defaultValue:o.id},this.getAppointments())))),r.a.createElement(D.a,{variant:"primary",onClick:function(){return e.showOtherSlots()}},"Pick Another Slot?")," ")}}]),a}(n.Component),R=Object(y.b)((function(e){return Object(b.a)({},e)}),(function(e){return{fetchAppointments:function(){e(function(){console.log(" fetchAppointments");var e={requestedTimeSlot:[{validFor:{startDateTime:"2020-07-27T00:00:00.000Z",endDateTime:"2020-07-21T00:00:00.000Z"}}],RelatedPlace:{id:"888",href:"https://host:port/addressManagement/geographicAddress/888",name:"Main Home",role:"interventionAddress","@referredType":"GeographicAddress"},relatedEntity:[{id:"789",href:"https://host:port/troubleTicket/troubleTicket/789",name:"Full Fiber installation",role:"Problem description","@referredType":"InstallationTicket"}]};return function(t){t({type:"getAppointmentsRequest",isLoading:!0}),fetch("https://067cf8a3-4274-4333-92c2-dcb4adb3fe28.mock.pstmn.io/searchTimeSlot",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)}).then(function(){var e=Object(k.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.json(),console.log("Response: ",t),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){console.log(e);var a=e.availableTimeSlot.map((function(e){return e.validFor}));t({type:"getAppointmentsSucess",isLoading:!1,appointments:a})})).catch((function(e){console.log("error",e),t({type:"getAppointmentsFailure",isLoading:!1,error:e.message})}))}}())},reserveAppointment:function(t){e(function(e){console.log("reserveAppointment Input: ",e);var t={externalId:"432113",category:"intervention",description:"Fix an internet connexion problem for a customer",validFor:{startDateTime:"2020-07-15T14:00:00.071Z",endDateTime:"2020-07-15T16:00:00.071Z"},attachment:[{id:"4444",href:"https://host:port/documentManagement/customerContract/4444",isRef:!0,"@referredType":"CustomerContract","@baseType":"Attachment"}],calendarEvent:{id:"33",href:" https://host:port/timeManagement/calendarEvent/33",name:"Outlook calendar event"},relatedParty:[{id:"32",href:"https://host:port/partyManagement/individual/32",name:"Kate Smith",role:"customer","@referredType":"Individual"},{id:"56",href:"https://host:port/partyManagement/individual/56",name:"John Doe",role:"technician","@referredType":"Individual"}],RelatedPlace:{id:"888",href:"https://host:port/addressManagement/geographicAddress/888",name:"Main Home",role:"interventionAddress","@referredType":"GeographicAddress"},relatedEntity:[{id:"789",href:"https://host:port/troubleTicket/troubleTicket/789",name:"Full Fiber installation",role:"Problem description","@referredType":"InstallationTicket"},{id:"465",href:"https://host:port/workForceManagement/workOrder/465",role:"work order description",name:"Work order generated for technician intervention","@referredType":"WorkOrder"}],note:[{date:"2020-07-04T11:00:18.071Z",author:"Ludovic Robert",text:"Problem explained to the technician"},{date:"2020-07-04T14:40:43.071Z",author:"Ludovic Robert",text:"Work order generated"}]};return function(e,a){e(function(e){return{type:"reserveAppointmentRequest",isLoading:!0,reserveAppointmentRequest:e}}(a)),fetch("https://067cf8a3-4274-4333-92c2-dcb4adb3fe28.mock.pstmn.io/appointment",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(t)}).then(function(){var e=Object(k.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.json(),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){console.log(t),e(function(e){return{type:"reserveAppointmentSucess",isLoading:!1,reservedAppointmentResponse:e}}(t))})).catch((function(t){console.log("error",t),e({type:"reserveAppointmentFailure",isLoading:!1,error:t.message})}))}}(t))}}}))(W),M=a(147),q=a(158),I=a(150),J=a(159);function Z(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"h6",gutterBottom:!0},"Payment method"),r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12,md:6},r.a.createElement(q.a,{required:!0,id:"cardName",label:"Name on card",fullWidth:!0,autoComplete:"cc-name"})),r.a.createElement(M.a,{item:!0,xs:12,md:6},r.a.createElement(q.a,{required:!0,id:"cardNumber",label:"Card number",fullWidth:!0,autoComplete:"cc-number"})),r.a.createElement(M.a,{item:!0,xs:12,md:6},r.a.createElement(q.a,{required:!0,id:"expDate",label:"Expiry date",fullWidth:!0,autoComplete:"cc-exp"})),r.a.createElement(M.a,{item:!0,xs:12,md:6},r.a.createElement(q.a,{required:!0,id:"cvv",label:"CVV",helperText:"Last three digits on signature strip",fullWidth:!0,autoComplete:"cc-csc"})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{control:r.a.createElement(J.a,{color:"secondary",name:"saveCard",value:"yes"}),label:"Remember credit card details for next time"}))))}function U(){var e=new Date;return e.setDate(e.getDate()+(7-e.getDay())%7+1),console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"h6",gutterBottom:!0},"Create Your BT ID"),r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"firstName",name:"firstName",label:"First name",fullWidth:!0,autoComplete:"given-name",value:"John"})),r.a.createElement(M.a,{item:!0,xs:12,sm:6}),r.a.createElement(M.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"lastName",name:"lastName",label:"Last name",fullWidth:!0,autoComplete:"family-name",value:"Shelton"})),r.a.createElement(M.a,{item:!0,xs:12,sm:6}),r.a.createElement(M.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"address1",name:"address1",label:"Mobile Contact Number",fullWidth:!0,autoComplete:"shipping address-line1"})),r.a.createElement(M.a,{item:!0,xs:12,sm:6}),r.a.createElement(M.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{id:"address2",name:"address2",label:"Email Address",fullWidth:!0,autoComplete:"shipping address-line2"})),r.a.createElement(M.a,{item:!0,xs:12,sm:6}),r.a.createElement(M.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"zip",name:"zip",label:"Postal code",fullWidth:!0,autoComplete:"shipping postal-code",value:"PO16 7GZ"})),r.a.createElement(M.a,{item:!0,xs:12,sm:6}),r.a.createElement(M.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"password",name:"password",label:"Password",fullWidth:!0,type:"password",autoComplete:"shipping postal-code",value:"password"})),r.a.createElement(M.a,{item:!0,xs:12,sm:6})))}var G=a(149),H=a(152),V=a(153),$=[{name:"Broadband",desc:"Full Fibre 900 Broadband Only Product",price:"$26.99"},{name:"Upfront cost",desc:"",price:"$9.99"}],z=["Hampshire","PO16 7GZ","UK"],Y=[{name:"Card type",detail:"Visa"},{name:"Card holder",detail:"Mr John Shelton"},{name:"Card number",detail:"xxxx-xxxx-xxxx-1234"},{name:"Expiry date",detail:"04/2024"}],K=Object(m.a)((function(e){return{listItem:{padding:e.spacing(1,0)},total:{fontWeight:700},title:{marginTop:e.spacing(2)}}}));function Q(){var e=K();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"h6",gutterBottom:!0},"Order summary"),r.a.createElement(G.a,{disablePadding:!0},$.map((function(t){return r.a.createElement(H.a,{className:e.listItem,key:t.name},r.a.createElement(V.a,{primary:t.name,secondary:t.desc}),r.a.createElement(v.a,{variant:"body2"},t.price))})),r.a.createElement(H.a,{className:e.listItem},r.a.createElement(V.a,{primary:"Total"}),r.a.createElement(v.a,{variant:"subtitle1",className:e.total},"$34.06"))),r.a.createElement(M.a,{container:!0,spacing:2},r.a.createElement(M.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{variant:"h6",gutterBottom:!0,className:e.title},"Hub Delivery Address"),r.a.createElement(v.a,{gutterBottom:!0},"John Shelton"),r.a.createElement(v.a,{gutterBottom:!0},z.join(", "))),r.a.createElement(M.a,{item:!0,container:!0,direction:"column",xs:12,sm:6},r.a.createElement(v.a,{variant:"h6",gutterBottom:!0,className:e.title},"Payment details"),r.a.createElement(M.a,{container:!0},Y.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement(M.a,{item:!0,xs:6},r.a.createElement(v.a,{gutterBottom:!0},e.name)),r.a.createElement(M.a,{item:!0,xs:6},r.a.createElement(v.a,{gutterBottom:!0},e.detail)))}))))))}function X(){return r.a.createElement(v.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(E.a,{color:"inherit",href:"https://material-ui.com/"},"BT")," ",(new Date).getFullYear(),".")}var _=Object(m.a)((function(e){return{appBar:{position:"relative"},layout:Object(c.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:750,marginLeft:"auto",marginRight:"auto"}),paper:Object(c.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),ee=["Personal Details","Appointment","Payment details","Review your order"];function te(){var e=_(),t=r.a.useState(0),a=Object(s.a)(t,2),n=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(u.a,{className:e.paper},r.a.createElement(v.a,{component:"h1",variant:"h4",align:"center"},"Full Fibre Prototype"),r.a.createElement(d.a,{activeStep:n,className:e.stepper},ee.map((function(e){return r.a.createElement(h.a,{key:e},r.a.createElement(g.a,null,e))}))),r.a.createElement(r.a.Fragment,null,n===ee.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"h5",gutterBottom:!0},"Thank you for your order."),r.a.createElement(v.a,{variant:"subtitle1"},"Your order number is #2001539. We have emailed your order confirmation, and will send you an update when your order has shipped.")):r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(U,null);case 1:return r.a.createElement(R,null);case 2:return r.a.createElement(Z,null);case 3:return r.a.createElement(Q,null);default:throw new Error("Unknown step")}}(n),r.a.createElement("div",{className:e.buttons},0!==n&&r.a.createElement(f.a,{onClick:function(){o(n-1)},className:e.button},"Back"),r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:function(){o(n+1)},className:e.button},n===ee.length-1?"Place order":"Next"))))),r.a.createElement(X,null)))}var ae=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{expand:"lg",bg:"primary",variant:"dark"},r.a.createElement(l.a.Brand,{href:"#home"},r.a.createElement("img",{alt:"",src:"/logo.svg",width:"30",height:"30",className:"d-inline-block align-top"})," ","BT")),r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement(te,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(102);var ne=a(38),re=a(69),oe={isLoading:!1,appointments:[]},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getAppointmentsRequest":return e;case"getAppointmentsSucess":return Object(b.a)(Object(b.a)({},e),{},{appointments:t.appointments,isLoading:t.isLoading});case"getAppointmentsFailure":default:return e}},le=Object(ne.a)(re.a),se=Object(ne.c)(ie,le);i.a.render(r.a.createElement(y.a,{store:se},r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){e.exports=a.p+"static/media/appointmentMsg.4a7b429e.jpg"},87:function(e,t,a){e.exports=a(103)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.f35d8859.chunk.js.map